"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[189],{189:(K,v,l)=>{l.r(v),l.d(v,{ConsistentSpreadsheetPageModule:()=>G});var f=l(6814),m=l(95),a=l(5548),_=l(5785),C=l(5861),T=l(394),x=l(6502),e=l(6689);class b{constructor(n=3e3,t=6e3,i=50){this.min=n,this.max=t,this.fixed=i}fixedDuration(){this.end=this.fixed+Date.now()}randomDuration(){this.end=Math.floor(Math.random()*(this.max-this.min)+this.min+Date.now())}stop(){this.end=void 0}isActive(){return void 0!==this.end}isTimeUp(){return void 0!==this.end&&Date.now()>=this.end}remainingTime(){if(void 0!==this.end)return this.end-Date.now()}}class c{constructor(n,t){this._nextIndex=n,this._matchIndex=t}get nextIndex(){return this._nextIndex}get matchIndex(){return this._matchIndex}decrementNexIndex(n){let t=this._nextIndex.get(n);void 0!==t&&t>0&&(t--,this._nextIndex.set(n,t))}}class p{constructor(){this.votes=new Set}addVote(n){this.votes.add(n)}countVotes(){return this.votes.size}}class h{constructor(n){this._leaderId=n}set leaderId(n){this._leaderId=n}get leaderId(){return this._leaderId}}class L{constructor(n=[]){this._logs=n,this._currentTerm=0,this._commitIndex=0,this._lastApplied=0}fetchCommittedLogs(){if(this._lastApplied<this._commitIndex){let n=this._logs.slice(this._lastApplied,this._commitIndex);return this._lastApplied=this._commitIndex,n}return[]}getMissingLogs(n){return this._logs.slice(n)}replaceInvalidLogs(n){return void 0!==this._logs[n]&&(this._logs.splice(n),!0)}get currentTerm(){return this._currentTerm}set currentTerm(n){this._currentTerm=n}get votedFor(){return this._votedFor}set votedFor(n){this._votedFor=n}getLogTerm(n){var t;return null===(t=this._logs[n-1])||void 0===t?void 0:t.term}hasLogAtIndex(n){return void 0!==this._logs[n-1]||0===n}get logs(){return this._logs}get commitIndex(){return this._commitIndex}set commitIndex(n){this._commitIndex=n}get lastLogIndex(){return this._logs.length}get lastLogTerm(){var n;return null===(n=this._logs[this._logs.length-1])||void 0===n?void 0:n.term}get lastApplied(){return this._lastApplied}isUpToDate(n,t){return void 0!==t&&void 0!==this.lastLogTerm&&(t>this.lastLogTerm||t===this.lastLogTerm&&n>=this.lastLogIndex)||t===this.lastLogTerm&&n>=this.lastLogIndex||void 0!==t&&void 0===this.lastLogTerm}}class R{constructor(n,t,i=!1,r=[]){this._nodeId=n,this.observer=t,this.debug=i,this.role=new h,this._cluster=new Set,this.commandBuffer=[],this.serverState=new L(r)}start(){this.timeout()}handleMessage(n){void 0!==n&&(function I(s){return"object"==typeof s&&"term"in s&&"candidateId"in s&&"lastLogIndex"in s}(n)?this.handleRequestVoteRequest(n):function M(s){return"object"==typeof s&&"term"in s&&"voteGranted"in s&&"id"in s}(n)?this.handleRequestVoteResponse(n):function Z(s){return"object"==typeof s&&"term"in s&&"leaderId"in s&&"prevLogIndex"in s&&"entries"in s&&"leaderCommit"in s}(n)?this.handleAppendEntriesRequest(n):function w(s){return"object"==typeof s&&"term"in s&&"success"in s&&"id"in s&&"lastLogIndex"in s}(n)?this.handleAppendEntriesResponse(n):function A(s){return"object"==typeof s&&"content"in s&&"term"in s}(n)?this.handleCommand(n):console.warn("invalid message: ",n))}handleRequestVoteRequest(n){this.print("Handle RequestVoteRequest: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term);let t=!1;n.term===this.serverState.currentTerm&&(void 0===this.serverState.votedFor||this.serverState.votedFor===n.candidateId)&&this.serverState.isUpToDate(n.lastLogIndex,n.lastLogTerm)&&(this.observer.restartElectionTimer(),this.serverState.votedFor=n.candidateId,t=!0),this.requestVoteResponse(n.candidateId,t)}handleRequestVoteResponse(n){this.print("Handle RequestVoteResponse: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term),this.role instanceof p&&n.voteGranted&&n.term===this.serverState.currentTerm&&(this.role.addVote(n.id),this.role.countVotes()>=this.majority()&&this.becomeLeader())}handleAppendEntriesRequest(n){if(this.print("Handle AppendEntriesRequest: ",n),(n.term>this.serverState.currentTerm||!(this.role instanceof h)&&this.serverState.currentTerm===n.term)&&this.becomeFollower(n.term,n.leaderId),this.observer.restartElectionTimer(),n.term<this.serverState.currentTerm||!this.serverState.hasLogAtIndex(n.prevLogIndex)||n.prevLogTerm!==this.serverState.getLogTerm(n.prevLogIndex))return this.print("Declined request term: "+n.term+" currentTerm: "+this.serverState.currentTerm+" request prevLogIndex: "+n.prevLogIndex+" current lastLogIndex: "+this.serverState.lastLogIndex+" request prevLogTerm: "+n.prevLogTerm+" current logTermAt: "+this.serverState.getLogTerm(n.prevLogIndex)),void this.appendEntriesResponse(n.leaderId,!1);this.role instanceof h&&void 0===this.role.leaderId&&this.serverState.currentTerm===n.term&&(this.role.leaderId=n.leaderId),this.serverState.replaceInvalidLogs(n.prevLogIndex)&&this.print("Removed invalid logs after index ",n.prevLogIndex),this.serverState.logs.push(...n.entries),n.leaderCommit>this.serverState.commitIndex&&(this.serverState.commitIndex=Math.min(n.leaderCommit,this.serverState.lastLogIndex),this.serverState.fetchCommittedLogs().forEach(i=>this.observer.onLog(i)),this.print("Leader increased commitIndex to: ",this.serverState.commitIndex),this.observer.onStateChange(this.getMetaData())),this.appendEntriesResponse(n.leaderId,!0),this.sendUnsentCommands()}handleAppendEntriesResponse(n){if(this.print("Handle AppendEntriesResponse: ",n),n.term>this.serverState.currentTerm)this.becomeFollower(n.term);else if(this.role instanceof c){if(!n.success){this.role.decrementNexIndex(n.id);const t=this.role.nextIndex.get(n.id);if(void 0===t)return void this.warn("Missing entry in nextIndex for: ",n.id);const i=this.serverState.getLogTerm(t),r=this.serverState.getMissingLogs(t);return void this.appendEntriesRequest(n.id,t,i,r)}n.lastLogIndex>this.role.matchIndex.get(n.id)&&(this.role.nextIndex.set(n.id,n.lastLogIndex+1),this.role.matchIndex.set(n.id,n.lastLogIndex),this.advanceCommitIndex())}else this.warn("handleAppendEntriesResponse: node is not leader ",n)}command(n){this.role instanceof h&&void 0!==this.role.leaderId?this.log(this.role.leaderId,n):this.role instanceof c?this.handleCommand({term:this.serverState.currentTerm,content:n}):this.commandBuffer.push(n)}handleCommand(n){if(this.role instanceof c){this.print("Received command: ",n);const t=this.serverState.lastLogIndex,i=this.serverState.lastLogTerm;this.serverState.logs.push(n),this._cluster.forEach(r=>this.appendEntriesRequest(r,t,i,[n]))}else this.warn("Cant handle command as: ",this.role)}requestVoteRequest(n){const t={term:this.serverState.currentTerm,candidateId:this._nodeId,lastLogIndex:this.serverState.lastLogIndex,lastLogTerm:this.serverState.getLogTerm(this.serverState.lastLogIndex)};this.observer.sendRaftMessage(n,t),this.print("Send requestVoteRequest: ",t)}requestVoteResponse(n,t){const i={term:this.serverState.currentTerm,voteGranted:t,id:this.nodeId};this.observer.sendRaftMessage(n,i),this.print("Send requestVoteResponse: ",i)}appendEntriesRequest(n,t,i,r=[]){const o={term:this.serverState.currentTerm,leaderId:this._nodeId,prevLogIndex:t,prevLogTerm:i,entries:r,leaderCommit:this.serverState.commitIndex};this.observer.sendRaftMessage(n,o),this.print("Send appendEntriesRequest: ",o)}appendEntriesResponse(n,t){const i={term:this.serverState.currentTerm,success:t,id:this.nodeId,lastLogIndex:this.serverState.lastLogIndex};this.observer.sendRaftMessage(n,i),this.print("Send appendEntriesResponse: ",i)}log(n,t){const i={term:this.serverState.currentTerm,content:t};this.observer.sendLog(n,i),this.print("Send command: ",i)}sendUnsentCommands(){this.commandBuffer.forEach(n=>this.command(n)),this.commandBuffer=[]}becomeFollower(n,t){this.print("New role: FOLLOWER, term: ",n," leader: ",t),void 0!==n&&(this.serverState.currentTerm=n),this.serverState.votedFor=void 0,this.role=new h(t),this.observer.restartElectionTimer(),this.observer.onStateChange(this.getMetaData())}becomeCandidate(){this.print("New role: CANDIDATE"),this.role=new p,this.serverState.currentTerm++,this.serverState.votedFor=this._nodeId,this.role.addVote(this._nodeId),this.observer.restartElectionTimer(),this._cluster.forEach(n=>this.requestVoteRequest(n)),this.observer.onStateChange(this.getMetaData())}becomeLeader(){this.print("New role: LEADER");const n=new Map,t=new Map;this._cluster.forEach(i=>{n.set(i,this.serverState.logs.length+1),t.set(i,0)}),this.role=new c(n,t),this._cluster.forEach(i=>this.appendEntriesRequest(i,this.serverState.lastLogIndex,this.serverState.lastLogTerm)),this.observer.restartHeartbeatTimer(),this.observer.onStateChange(this.getMetaData())}advanceCommitIndex(){if(this.role instanceof c){const n=Array.from(this.role.matchIndex.values()).filter(i=>i>this.serverState.commitIndex&&this.serverState.getLogTerm(i)===this.serverState.currentTerm),t=this.majority();if(n.length<t)return void this.print(`Cant advance commit index ${this.serverState.commitIndex} required ${n.length}/${t}`,this.role.matchIndex.values());n.sort((i,r)=>i-r),this.serverState.commitIndex=n[0],this.serverState.fetchCommittedLogs().forEach(i=>this.observer.onLog(i)),this.print("Increased commitIndex to: ",this.serverState.commitIndex),this.observer.onStateChange(this.getMetaData())}else this.warn("Cant advance commit as: ",this.role)}majority(){return Math.floor(this._cluster.size/2)+1}timeout(){if((this.role instanceof h||this.role instanceof p)&&(this.print("Election timeout"),this.becomeCandidate()),this.role instanceof c){this.print("Heartbeat");for(const n of this._cluster)this.appendEntriesRequest(n,this.serverState.lastLogIndex,this.serverState.lastLogTerm);this.observer.restartHeartbeatTimer()}}addNode(n){const t=this._cluster.size;return this._cluster.add(n),this._cluster.size>t&&(this.role instanceof c&&(this.role.nextIndex.set(n,this.serverState.logs.length+1),this.role.matchIndex.set(n,0)),!0)}print(...n){this.debug&&console.log(...n)}warn(...n){this.debug&&console.warn(...n)}isLeader(){return this.role instanceof c}isFollower(){return this.role instanceof h}isCandidate(){return this.role instanceof p}get nodeId(){return this._nodeId}get allLogs(){return this.serverState.logs}get clusterSize(){return this._cluster.size+1}get commitIndex(){return this.serverState.commitIndex}get cluster(){return this._cluster}get term(){return this.serverState.currentTerm}get lastLogIndex(){return this.serverState.lastLogIndex}getCurrentRole(){return this.isCandidate()?"Candidate":this.isLeader()?"Leader":this.isFollower()?"Follower":""}getMetaData(){return{lastLogIndex:this.serverState.lastLogIndex,role:this.getCurrentRole(),term:this.term,commitIndex:this.serverState.commitIndex,lastAppliedLog:this.serverState.lastApplied}}}var y=l(8649);let E=(()=>{class s{constructor(t){this.broadcastService=t,this.channelName="raft",this._isConnected=!0,this.messageDelays=[],this.timer=new b,this.node=new R(this.identifier.uuid,this)}openChannel(t,i){this.closeChannel(),this.channelName=t,this.observer=i,this.broadcastService.openChannel(this.channelName,this)}closeChannel(){this.timer.stop(),this.broadcastService.closeChannel()}start(){this.node.start()}send(t){this.node.command(t)}sendLog(t,i){this._isConnected&&this.broadcastService.send(i,t,!0)}onLog(t){var i;const r=this.calculateMedianMessageDelay();null===(i=this.observer)||void 0===i||i.onMessage(t.content,r)}calculateMedianMessageDelay(){if(0===this.messageDelays.length)return this.lastMedianDelay;this.messageDelays.sort((i,r)=>i-r);const t=this.messageDelays[this.messageDelays.length-Math.floor(this.messageDelays.length/10+1)];return this.messageDelays=[],this.lastMedianDelay=t,t}sendRaftMessage(t,i){this._isConnected&&this.broadcastService.send(i,t,!1)}onMessage(t,i){void 0!==i&&this.messageDelays.push(i),this._isConnected&&this.node.handleMessage(t)}onNode(t){var r;this.node.addNode(t)&&(console.log("Added node: ",t," to cluster"),null===(r=this.observer)||void 0===r||r.onNode(t))}checkTime(){const t=this.timer.remainingTime();this.timer.isTimeUp()?this.node.timeout():void 0!==t&&setTimeout(()=>this.checkTime(),t)}restartElectionTimer(){this.timer.randomDuration();const t=this.timer.remainingTime();void 0!==t&&setTimeout(()=>this.checkTime(),t)}restartHeartbeatTimer(){this.timer.fixedDuration();const t=this.timer.remainingTime();void 0!==t&&setTimeout(()=>this.checkTime(),t)}canBeStarted(){return this.isConnected&&!this.isActive()&&this.nodes.size>1}get nodes(){return this.node.cluster}get identifier(){return this.broadcastService.identifier}set isConnected(t){this._isConnected=t}get isConnected(){return this._isConnected}onStateChange(t){var i;null===(i=this.observer)||void 0===i||i.onStateChange(t)}getMetaData(){return this.node.getMetaData()}isActive(){return this.timer.isActive()}get totalBytes(){return this.broadcastService.totalBytes}get countedMessages(){return this.broadcastService.countedMessages}get totalReceivedMessages(){return this.broadcastService.totalReceivedMessages}get totalSentMessages(){return this.broadcastService.totalSentMessages}get countBytes(){return this.broadcastService.countBytes}set countBytes(t){this.broadcastService.countBytes=t}get delay(){return this.broadcastService.delay}set delay(t){this.broadcastService.delay=t}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(y.M))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var U=l(7670),P=l(5377),D=l(1863),u=l(6148),N=l(4499),g=l(7330);let F=(()=>{class s{constructor(){this.inputTable=new U.i,this.spreadsheetSolver=new P.O(this.inputTable),this.fillTable()}fillTable(){const t=new D.x("init");for(let i=0;i<10;i++){const r=this.addRow(t.next()),o=this.addColumn(t.next());this.applyUpdate(r),this.applyUpdate(o)}this.spreadsheetSolver.reset()}addRow(t){return u.Z.addRow(t)}insertRow(t,i){return u.Z.insertRow(t,i)}deleteRow(t){return u.Z.deleteRow(t)}addColumn(t){return u.Z.addColumn(t)}insertColumn(t,i){return u.Z.insertColumn(t,i)}deleteColumn(t){return u.Z.deleteColumn(t)}set(t,i){return u.Z.insertCell(t,i)}deleteCell(t){this.inputTable.deleteValue(t),this.spreadsheetSolver.reset()}applyUpdate(t){switch(t.action){case g.U.INSERT_CELL:{const i={column:t.column,row:t.row};if(0===t.input.trim().length)this.deleteCell(i);else{const r=N.b.parseCell(t.input);this.inputTable.set(i,r)}this.spreadsheetSolver.reset()}break;case g.U.ADD_ROW:this.inputTable.addRow(t.input),this.spreadsheetSolver.reset();break;case g.U.INSERT_ROW:this.inputTable.insertRow(t.input,t.row),this.spreadsheetSolver.reset();break;case g.U.ADD_COLUMN:this.inputTable.addColumn(t.input),this.spreadsheetSolver.reset();break;case g.U.INSERT_COLUMN:this.inputTable.insertColumn(t.input,t.column),this.spreadsheetSolver.reset();break;case g.U.DELETE_COLUMN:this.inputTable.deleteColumn(t.column),this.spreadsheetSolver.reset();break;case g.U.DELETE_ROW:this.inputTable.deleteRow(t.row),this.spreadsheetSolver.reset();break;default:console.warn("Cant perform update for update: ",t)}}renderTable(){return this.spreadsheetSolver.solve()}get rows(){return this.inputTable.rows}get columns(){return this.inputTable.columns}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var J=l(367);function q(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"ion-button",3),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.start())}),e._uU(2,"Start"),e.qZA()()}}function j(s,n){1&s&&(e.TgZ(0,"div")(1,"ion-button",20),e._uU(2,"Start"),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("disabled",!0))}function k(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"form",4),e.NdJ("submit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.insertCell(r.currentCell.address,r.input))}),e.TgZ(2,"ion-input",21),e.NdJ("ngModelChange",function(r){e.CHM(t);const o=e.oxw();return e.KtG(o.input=r)}),e.qZA()()()}if(2&s){const t=e.oxw();e.xp6(2),e.Q6J("ngModel",t.input)}}function O(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"th",22)(1,"ion-toolbar")(2,"ion-buttons",23)(3,"ion-button",24),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.insertColumn(o))}),e._UZ(4,"ion-icon",18),e.qZA()(),e._uU(5),e.TgZ(6,"ion-buttons",25)(7,"ion-button",26),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.deleteColumn(o))}),e._UZ(8,"ion-icon",27),e.qZA()()()()}if(2&s){const t=n.index;e.xp6(5),e.hij(" ",t+1," ")}}const S=function(s,n){return{column:s,row:n}};function z(s,n){if(1&s&&(e.TgZ(0,"div")(1,"div",32),e._uU(2),e.qZA()()),2&s){const t=e.oxw().$implicit,i=e.oxw().$implicit,r=e.oxw();let o;e.xp6(2),e.hij(" ",null==(o=r.spreadsheet.renderTable().get(e.WLB(1,S,t,i)))?null:o.content," ")}}function B(s,n){if(1&s&&e._uU(0),2&s){const t=e.oxw().$implicit,i=e.oxw().$implicit,r=e.oxw();let o;e.hij(" ",null==(o=r.spreadsheet.renderTable().get(e.WLB(1,S,t,i)))?null:o.content," ")}}function $(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"td",29),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw().$implicit,Y=e.oxw();return e.KtG(Y.selectCell(o,d))}),e.YNc(1,z,3,4,"div",30),e.YNc(2,B,1,4,"ng-template",null,31,e.W1O),e.qZA()}if(2&s){const t=n.$implicit,i=e.MAs(3),r=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",void 0!==o.currentCell&&o.currentCell.address.row===r&&o.currentCell.address.column===t)("ngIfElse",i)}}function V(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td",15)(2,"ion-toolbar")(3,"ion-buttons",23)(4,"ion-button",24),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.insertRow(o))}),e._UZ(5,"ion-icon",18),e.qZA()(),e._uU(6),e.TgZ(7,"ion-buttons",25)(8,"ion-button",26),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.deleteRow(o))}),e._UZ(9,"ion-icon",27),e.qZA()()()(),e.YNc(10,$,4,2,"td",28),e.qZA()}if(2&s){const t=n.index,i=e.oxw();e.xp6(6),e.hij(" ",t+1," "),e.xp6(4),e.Q6J("ngForOf",i.spreadsheet.renderTable().columns)}}const H=[{path:"",component:(()=>{class s extends x.H{constructor(t,i,r,o,d){super(o,t,r,s.TAG,d),this.raftService=t,this.alertController=i,this._raftMetaData={term:0,role:"",lastLogIndex:0,commitIndex:0,lastAppliedLog:0}}start(){this.raftService.start()}grow(t){this.raftService.isActive()&&this.raftService.isConnected?super.grow(t):this.presentAlert().finally()}clear(){this.raftService.isActive()&&this.raftService.isConnected?super.clear():this.presentAlert().finally()}startTests(){this.raftService.isActive()&&this.raftService.isConnected?super.startTests():this.presentAlert().finally()}performAction(t){this.raftService.isActive()&&this.raftService.isConnected?super.performAction(t):this.presentAlert().finally()}presentAlert(){var t=this;return(0,C.Z)(function*(){let i;i=!t.raftService.isConnected&&t.raftService.isActive()?yield t.alertController.create({header:"Can not alter spreadsheet!",subHeader:"Connection must be enabled",message:`Connection enabled: ${t.raftService.isConnected}`,buttons:["OK"]}):t.canBeStarted()?yield t.alertController.create({header:"Can not alter spreadsheet!",subHeader:"Raft needs to be started first",message:`connection enabled: ${t.raftService.isConnected}/true connected nodes: ${t.raftService.nodes.size+1}/3`,buttons:[{text:"Cancel",role:"cancel"},{text:"Start raft",role:"confirm",handler:()=>{t.raftService.start()}}]}):yield t.alertController.create({header:"Can not alter spreadsheet!",subHeader:"Raft needs to be started first",message:`connection enabled: ${t.raftService.isConnected}/true connected nodes: ${t.raftService.nodes.size}/3`,buttons:["OK"]}),yield i.present()})()}onMessage(t,i){(0,T.rz)(t)?super.onMessage(t,i):console.warn("Invalid message",t)}onStateChange(t){this._raftMetaData=t}canBeStarted(){return this.raftService.canBeStarted()}get raftMetaData(){return this._raftMetaData=this.raftService.getMetaData(),this._raftMetaData}get isActive(){return this.raftService.isActive()}}return s.TAG="consistent",s.\u0275fac=function(t){return new(t||s)(e.Y36(E),e.Y36(a.Br),e.Y36(F),e.Y36(J.x),e.Y36(e.z2F))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-consistent-spreadsheet"]],features:[e.qOj],decls:118,vars:27,consts:[[3,"fullscreen"],["color","primary"],["size","large"],[3,"click"],[3,"submit"],["name","growInput","type","number","fill","outline","label","Grow",3,"ngModel","ngModelChange"],["lines","none"],["justify","start",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","number","fill","outline","label","Test size",3,"ngModel","ngModelChange"],["type","number","fill","outline","label","Number of tests",3,"ngModel","ngModelChange"],["size","auto"],[3,"ngModel","ngModelChange"],[1,"ion-padding-top"],[1,"spreadsheet"],[1,"table-header","small-cell"],["class","table-header cell",4,"ngFor","ngForOf"],["color","primary",3,"click"],["name","add"],[4,"ngFor","ngForOf"],[3,"disabled"],["name","consistent","fill","outline",3,"ngModel","ngModelChange"],[1,"table-header","cell"],["slot","start"],["fill","clear","size","small","color","success",3,"click"],["slot","end"],["fill","clear","size","small","color","danger",3,"click"],["name","close-circle-outline"],["class","ion-text-right cell",3,"click",4,"ngFor","ngForOf"],[1,"ion-text-right","cell",3,"click"],[4,"ngIf","ngIfElse"],["cellValue",""],[1,"selected"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title",2),e._uU(4,"consistent-spreadsheet"),e.qZA()()(),e.TgZ(5,"ion-grid")(6,"ion-row")(7,"ion-col")(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),e._uU(11,"State"),e.qZA()(),e.TgZ(12,"ion-card-content")(13,"ion-list")(14,"ion-item")(15,"ion-label"),e._uU(16),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19),e.qZA()(),e.TgZ(20,"ion-item")(21,"ion-label"),e._uU(22),e.qZA()(),e.TgZ(23,"ion-item")(24,"ion-label"),e._uU(25),e.qZA()(),e.TgZ(26,"ion-item")(27,"ion-button",3),e.NdJ("click",function(){return i.fillTable()}),e._uU(28,"Fill table"),e.qZA()(),e.TgZ(29,"ion-item")(30,"ion-button",3),e.NdJ("click",function(){return i.clear()}),e._uU(31,"Clear table"),e.qZA()(),e.TgZ(32,"ion-item")(33,"form",4),e.NdJ("submit",function(){return i.grow(i.growQuantity)}),e.TgZ(34,"ion-input",5),e.NdJ("ngModelChange",function(o){return i.growQuantity=o}),e.qZA()()(),e.TgZ(35,"ion-item")(36,"ion-label"),e._uU(37),e.qZA()(),e.TgZ(38,"ion-item")(39,"ion-label"),e._uU(40),e.qZA()(),e.TgZ(41,"ion-item")(42,"ion-label"),e._uU(43),e.qZA()(),e.TgZ(44,"ion-item",6)(45,"ion-toggle",7),e.NdJ("ngModelChange",function(o){return i.isConnected=o}),e.TgZ(46,"ion-title"),e._uU(47,"Connected"),e.qZA()()()()()()(),e.TgZ(48,"ion-col")(49,"ion-card")(50,"ion-card-header")(51,"ion-card-title"),e._uU(52,"Raft"),e.qZA()(),e.TgZ(53,"ion-card-content")(54,"ion-list")(55,"ion-item")(56,"ion-label"),e._uU(57),e.qZA()(),e.TgZ(58,"ion-item")(59,"ion-label"),e._uU(60),e.qZA()(),e.TgZ(61,"ion-item")(62,"ion-label"),e._uU(63),e.qZA()(),e.TgZ(64,"ion-item")(65,"ion-label"),e._uU(66),e.qZA()(),e.TgZ(67,"ion-item")(68,"ion-label"),e._uU(69),e.qZA()(),e.TgZ(70,"ion-item")(71,"ion-label"),e._uU(72),e.qZA()(),e.TgZ(73,"ion-item",6),e.YNc(74,q,3,0,"div",8),e.YNc(75,j,3,1,"div",8),e.qZA()()()()(),e.TgZ(76,"ion-col")(77,"ion-card")(78,"ion-card-header")(79,"ion-card-title"),e._uU(80,"Testing"),e.qZA()(),e.TgZ(81,"ion-card-content")(82,"ion-item",6)(83,"ion-grid")(84,"ion-row")(85,"ion-input",9),e.NdJ("ngModelChange",function(o){return i.testSize=o}),e.qZA()(),e.TgZ(86,"ion-row")(87,"ion-input",10),e.NdJ("ngModelChange",function(o){return i.testRuns=o}),e.qZA()(),e.TgZ(88,"ion-row")(89,"ion-col",11)(90,"ion-toggle",12),e.NdJ("ngModelChange",function(o){return i.countBytes=o}),e.TgZ(91,"ion-title"),e._uU(92,"Count bytes"),e.qZA()()(),e.TgZ(93,"ion-col",11)(94,"ion-toggle",12),e.NdJ("ngModelChange",function(o){return i.measureTime=o}),e.TgZ(95,"ion-title"),e._uU(96,"Measure time"),e.qZA()()()(),e.TgZ(97,"ion-row")(98,"ion-button",3),e.NdJ("click",function(){return i.startTests()}),e._uU(99,"Start test"),e.qZA()()()()()()()(),e.TgZ(100,"ion-row")(101,"ion-col",11)(102,"ion-title",13),e._uU(103),e.qZA()(),e.TgZ(104,"ion-col"),e.YNc(105,k,3,1,"div",8),e.qZA()()(),e.TgZ(106,"div",14)(107,"table")(108,"thead")(109,"tr"),e._UZ(110,"th",15),e.YNc(111,O,9,1,"th",16),e.TgZ(112,"ion-button",17),e.NdJ("click",function(){return i.addColumn()}),e._UZ(113,"ion-icon",18),e.qZA()()(),e.TgZ(114,"tbody"),e.YNc(115,V,11,2,"tr",19),e.qZA()()(),e.TgZ(116,"ion-button",17),e.NdJ("click",function(){return i.addRow()}),e._UZ(117,"ion-icon",18),e.qZA()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(16),e.hij("Remote nodes: ",i.communication.nodes.size,""),e.xp6(3),e.hij("Time: ",i.trackedTime,""),e.xp6(3),e.hij("Exchanged bytes: ",i.countedBytes,""),e.xp6(3),e.hij("Exchanged messages: ",i.countedMessages,""),e.xp6(9),e.Q6J("ngModel",i.growQuantity),e.xp6(3),e.hij("Total bytes: ",i.totalBytes,""),e.xp6(3),e.hij("Received messages: ",i.communication.totalReceivedMessages,""),e.xp6(3),e.hij("Sent messages: ",i.communication.totalSentMessages,""),e.xp6(2),e.Q6J("ngModel",i.isConnected),e.xp6(12),e.hij("Current role: ",i.raftMetaData.role,""),e.xp6(3),e.hij("Current term: ",i.raftMetaData.term,""),e.xp6(3),e.hij("Last log index: ",i.raftMetaData.lastLogIndex,""),e.xp6(3),e.hij("Commit index: ",i.raftMetaData.commitIndex,""),e.xp6(3),e.hij("Last applied log: ",i.raftMetaData.lastAppliedLog,""),e.xp6(3),e.hij("Required nodes: ",i.communication.nodes.size+1,"/3"),e.xp6(2),e.Q6J("ngIf",i.canBeStarted()),e.xp6(1),e.Q6J("ngIf",i.isActive||i.communication.nodes.size<=1),e.xp6(10),e.Q6J("ngModel",i.testSize),e.xp6(2),e.Q6J("ngModel",i.testRuns),e.xp6(3),e.Q6J("ngModel",i.countBytes),e.xp6(4),e.Q6J("ngModel",i.measureTime),e.xp6(9),e.AsE("",null==i.currentCell?null:i.currentCell.columnIndex,"|",null==i.currentCell?null:i.currentCell.rowIndex,""),e.xp6(2),e.Q6J("ngIf",void 0!==i.currentCell),e.xp6(6),e.Q6J("ngForOf",i.spreadsheet.renderTable().columns),e.xp6(4),e.Q6J("ngForOf",i.spreadsheet.renderTable().rows))},dependencies:[f.sg,f.O5,m._Y,m.JJ,m.JL,m.On,m.F,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.Dq,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.q_,a.Nd,a.wd,a.ho,a.sr,a.w,a.as,a.j9],styles:["table-header[_ngcontent-%COMP%]{color:gray;text-align:center}.small-cell[_ngcontent-%COMP%]{width:120px}.cell[_ngcontent-%COMP%]{width:150px}.selected[_ngcontent-%COMP%]{border:solid 5px black;height:50px;min-width:150px}.spreadsheet[_ngcontent-%COMP%]{overflow-x:auto}.spreadsheet[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed;width:100%}.spreadsheet[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spreadsheet[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:solid 1px lightgray}"]}),s})()}];let Q=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_.Bz.forChild(H),_.Bz]}),s})(),G=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.ez,m.u5,a.Pc,Q]}),s})()}}]);