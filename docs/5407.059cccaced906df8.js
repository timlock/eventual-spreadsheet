"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5407],{5407:(A,m,l)=>{l.r(m),l.d(m,{InconsistentSpreadsheetPageModule:()=>I});var g=l(6814),h=l(95),o=l(5548),_=l(5785),d=l(1940),C=l(394),u=l(6148),e=l(6689),S=l(3125),f=l(5220);function v(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"th",15)(1,"ion-toolbar")(2,"ion-buttons",16)(3,"ion-button",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.insertColumn(r))}),e._UZ(4,"ion-icon",13),e.qZA()(),e._uU(5),e.TgZ(6,"ion-buttons",18)(7,"ion-button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteColumn(r))}),e._UZ(8,"ion-icon",20),e.qZA()()()()}if(2&i){const t=c.index;e.xp6(5),e.hij(" ",t+1," ")}}const p=function(i,c){return{column:i,row:c}};function w(i,c){if(1&i&&(e.TgZ(0,"div")(1,"div",25),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,s=e.oxw();let r;e.xp6(2),e.hij(" ",null==(r=s.table.get(e.WLB(1,p,t,n)))?null:r.content," ")}}function b(i,c){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit,n=e.oxw().$implicit,s=e.oxw();let r;e.hij(" ",null==(r=s.table.get(e.WLB(1,p,t,n)))?null:r.content," ")}}function Z(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"td",22),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw().$implicit,P=e.oxw();return e.KtG(P.selectCell(r,a))}),e.YNc(1,w,3,4,"div",23),e.YNc(2,b,1,4,"ng-template",null,24,e.W1O),e.qZA()}if(2&i){const t=c.$implicit,n=e.MAs(3),s=e.oxw().$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.currentCell.row===s&&r.currentCell.column===t)("ngIfElse",n)}}function x(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",10)(2,"ion-toolbar")(3,"ion-buttons",16)(4,"ion-button",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.insertRow(r))}),e._UZ(5,"ion-icon",13),e.qZA()(),e._uU(6),e.TgZ(7,"ion-buttons",18)(8,"ion-button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteRow(r))}),e._UZ(9,"ion-icon",20),e.qZA()()()(),e.YNc(10,Z,4,2,"td",21),e.qZA()}if(2&i){const t=c.index,n=e.oxw();e.xp6(6),e.hij(" ",t+1," "),e.xp6(4),e.Q6J("ngForOf",n.table.columns)}}const M=[{path:"",component:(()=>{class i{constructor(t,n,s){this.communicationService=t,this.spreadsheetService=n,this.ngZone=s,this._nodes=new Set,this.channelName="inconsistent",this._receivedMessageCounter=0,this._sentMessageCounter=0,this._table=this.spreadsheetService.getTable(),this._currentCell=this.spreadsheetService.getCellByIndex(1,1)}ngAfterViewInit(){this.ionInput=document.getElementsByName("inconsistent-input")[0]}ionViewDidEnter(){this.communicationService.openChannel(this.channelName,this)}selectCell(t,n){var s;this._currentCell=this.spreadsheetService.getCellById({column:t,row:n}),this.table.rows.length>0&&this.table.columns.length>0&&(null===(s=this.ionInput)||void 0===s||s.setFocus())}addRow(){let t=this.identifier.next(),n=u.Z.addRow(t);this.spreadsheetService.addRow(t),this.communicationService.send(n)}insertRow(t){let n=this.identifier.next(),s=u.Z.insertRow(n,t);this.spreadsheetService.insertRow(n,t),this.communicationService.send(s)}deleteRow(t){let n=u.Z.deleteRow(t);this.spreadsheetService.deleteRow(t),this.communicationService.send(n)}addColumn(){let t=this.identifier.next(),n=u.Z.addColumn(t);this.spreadsheetService.addColumn(t),this.communicationService.send(n)}insertColumn(t){let n=this.identifier.next(),s=u.Z.insertColumn(n,t);this.spreadsheetService.insertColumn(n,t),this.communicationService.send(s)}deleteColumn(t){let n=u.Z.deleteColumn(t);this.spreadsheetService.deleteColumn(t),this.communicationService.send(n)}insertCell(t){let n=u.Z.insertCell(t.address,t.input);this.spreadsheetService.insertCellById(t.address,t.input),this.communicationService.send(n)}deleteCell(t){t.input="",this.insertCell(t)}getCell(t,n){return this.spreadsheetService.getTable().get({column:t,row:n})}get currentCell(){return(-1===this.table.rows.indexOf(this._currentCell.row)||-1===this.table.columns.indexOf(this._currentCell.column))&&this.selectCell(this.table.columns[0],this.table.rows[0]),this._currentCell}onMessage(t,n){(0,C.rz)(t)?(this.handleAction(t),this.ngZone.run(()=>this.table=this.spreadsheetService.getTable())):console.warn("Invalid message",t)}onNode(t){this._nodes.add(t),this.ngZone.run(()=>this._nodes=this.communicationService.nodes)}handleAction(t){switch(t.action){case d.U.INSERT_CELL:this.spreadsheetService.insertCellById({column:t.column,row:t.row},t.input);break;case d.U.ADD_ROW:this.spreadsheetService.addRow(t.input);break;case d.U.INSERT_ROW:this.spreadsheetService.insertRow(t.input,t.row);break;case d.U.ADD_COLUMN:this.spreadsheetService.addColumn(t.input);break;case d.U.INSERT_COLUMN:this.spreadsheetService.insertColumn(t.input,t.column);break;case d.U.DELETE_COLUMN:this.spreadsheetService.deleteColumn(t.column);break;case d.U.DELETE_ROW:this.spreadsheetService.deleteRow(t.row);break;default:console.warn("Cant perform action for payload: ",t)}}get table(){return this._table=this.spreadsheetService.getTable(),this._table}set table(t){this._table=t}get nodes(){return this._nodes}get identifier(){return this.communicationService.identifier}get isConnected(){return this.communicationService.isConnected}set isConnected(t){this.communicationService.isConnected=t}get receivedMessageCounter(){return this._receivedMessageCounter=this.communicationService.receivedMessageCounter,this._receivedMessageCounter}get sentMessageCounter(){return this._sentMessageCounter=this.communicationService.sentMessageCounter,this._sentMessageCounter}onMessageCounterUpdate(t,n){this.ngZone.run(()=>{this._receivedMessageCounter=t,this._sentMessageCounter=n})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.O),e.Y36(f.t),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-inconsistent-spreadsheet"]],decls:46,vars:10,consts:[[3,"fullscreen"],["color","warning"],["size","large"],["lines","none"],["justify","start",3,"ngModel","ngModelChange"],["size","auto"],[1,"ion-padding-top"],[3,"submit"],["name","inconsistent-input","fill","outline",3,"ngModel","ngModelChange"],[1,"spreadsheet"],[1,"table-header","small-cell"],["class","table-header cell",4,"ngFor","ngForOf"],["color","primary",3,"click"],["name","add"],[4,"ngFor","ngForOf"],[1,"table-header","cell"],["slot","start"],["fill","clear","size","small","color","success",3,"click"],["slot","end"],["fill","clear","size","small","color","danger",3,"click"],["name","close-circle-outline"],["class","ion-text-right cell",3,"click",4,"ngFor","ngForOf"],[1,"ion-text-right","cell",3,"click"],[4,"ngIf","ngIfElse"],["cellValue",""],[1,"selected"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title",2),e._uU(4,"inconsistent-spreadsheet"),e.qZA()()(),e.TgZ(5,"ion-grid")(6,"ion-row")(7,"ion-col")(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),e._uU(11,"State"),e.qZA()(),e.TgZ(12,"ion-card-content")(13,"ion-list")(14,"ion-item")(15,"ion-label"),e._uU(16),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19),e.qZA()(),e.TgZ(20,"ion-item")(21,"ion-label"),e._uU(22),e.qZA()(),e.TgZ(23,"ion-item",3)(24,"ion-toggle",4),e.NdJ("ngModelChange",function(r){return n.isConnected=r}),e.TgZ(25,"ion-title"),e._uU(26,"Connected"),e.qZA()()()()()()()(),e.TgZ(27,"ion-row")(28,"ion-col",5)(29,"ion-title",6),e._uU(30),e.qZA()(),e.TgZ(31,"ion-col")(32,"form",7),e.NdJ("submit",function(){return n.insertCell(n.currentCell)}),e.TgZ(33,"ion-input",8),e.NdJ("ngModelChange",function(r){return n.currentCell.input=r}),e.qZA()()()()(),e.TgZ(34,"div",9)(35,"table")(36,"thead")(37,"tr"),e._UZ(38,"th",10),e.YNc(39,v,9,1,"th",11),e.TgZ(40,"ion-button",12),e.NdJ("click",function(){return n.addColumn()}),e._UZ(41,"ion-icon",13),e.qZA()()(),e.TgZ(42,"tbody"),e.YNc(43,x,11,2,"tr",14),e.qZA()()(),e.TgZ(44,"ion-button",12),e.NdJ("click",function(){return n.addRow()}),e._UZ(45,"ion-icon",13),e.qZA()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(16),e.hij("Remote nodes: ",n.nodes.size,""),e.xp6(3),e.hij("Received messages: ",n.receivedMessageCounter,""),e.xp6(3),e.hij("Sent messages: ",n.sentMessageCounter,""),e.xp6(2),e.Q6J("ngModel",n.isConnected),e.xp6(6),e.AsE("",n.currentCell.colIndex,"|",n.currentCell.rowIndex,""),e.xp6(3),e.Q6J("ngModel",n.currentCell.input),e.xp6(6),e.Q6J("ngForOf",n.table.columns),e.xp6(4),e.Q6J("ngForOf",n.table.rows))},dependencies:[g.sg,g.O5,h._Y,h.JJ,h.JL,h.On,h.F,o.YG,o.Sm,o.PM,o.FN,o.Zi,o.Dq,o.wI,o.W2,o.jY,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.q_,o.Nd,o.wd,o.ho,o.sr,o.w,o.j9],styles:["table-header[_ngcontent-%COMP%]{color:gray;text-align:center}.small-cell[_ngcontent-%COMP%]{width:120px}.cell[_ngcontent-%COMP%]{width:150px}.selected[_ngcontent-%COMP%]{border:solid 5px black;min-height:50px;min-width:150px}.spreadsheet[_ngcontent-%COMP%]{overflow-x:auto}.spreadsheet[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed;width:100%}.spreadsheet[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spreadsheet[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:solid 1px lightgray}"]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.Bz.forChild(M),_.Bz]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,h.u5,o.Pc,T]}),i})()}}]);