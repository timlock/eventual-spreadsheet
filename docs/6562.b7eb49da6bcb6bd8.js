"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6562],{6562:(z,v,l)=>{l.r(v),l.d(v,{ConsistentSpreadsheetPageModule:()=>J});var f=l(6814),m=l(95),a=l(5548),_=l(5785),h=l(1940),C=l(394),u=l(6148),t=l(6689);class x{constructor(n=150,e=300,i=50){this.min=n,this.max=e,this.fixed=i}fixedDuration(){this.end=this.fixed+Date.now()}randomDuration(){this.end=Math.floor(Math.random()*(this.max-this.min)+this.min+Date.now())}stop(){this.end=void 0}isActive(){return void 0!==this.end}isTimeUp(){return void 0!==this.end&&Date.now()>=this.end}remainingTime(){if(void 0!==this.end)return this.end-Date.now()}}class c{constructor(n,e){this._nextIndex=n,this._matchIndex=e}get nextIndex(){return this._nextIndex}get matchIndex(){return this._matchIndex}decrementNexIndex(n){let e=this._nextIndex.get(n);void 0!==e&&e>0&&(e--,this._nextIndex.set(n,e))}}class p{constructor(){this.votes=new Set}addVote(n){this.votes.add(n)}countVotes(){return this.votes.size}}class g{constructor(n){this._leaderId=n}set leaderId(n){this._leaderId=n}get leaderId(){return this._leaderId}}class w{constructor(n=[]){this._currentTerm=0,this._commitIndex=0,this.lastApplied=0,this._log=n}fetchCommittedLogs(){if(this.lastApplied<this.commitIndex){let n=this._log.slice(this.lastApplied,this.commitIndex);return this.lastApplied=this.commitIndex,n}return[]}getMissingLogs(n){return this._log.slice(n)}replaceInvalidLogs(n){return void 0!==this._log[n]&&(this._log.splice(n),!0)}get currentTerm(){return this._currentTerm}set currentTerm(n){this._currentTerm=n}get votedFor(){return this._votedFor}set votedFor(n){this._votedFor=n}getLogTerm(n){var e;return null===(e=this._log[n-1])||void 0===e?void 0:e.term}hasLogAtIndex(n){return void 0!==this._log[n-1]||0==n}get log(){return this._log}get commitIndex(){return this._commitIndex}set commitIndex(n){this._commitIndex=n}get lastLogIndex(){return this._log.length}get lastLogTerm(){var n;return null===(n=this._log[this._log.length-1])||void 0===n?void 0:n.term}isUpToDate(n,e){return void 0!==e&&void 0!==this.lastLogTerm&&(e>this.lastLogTerm||e===this.lastLogTerm&&n>this.lastLogIndex)||e===this.lastLogTerm&&n>=this.lastLogIndex||void 0!==e&&void 0===this.lastLogTerm}}class R{constructor(n,e,i=!1,s=[]){this.role=new g,this._cluster=new Set,this.commandBuffer=[],this._nodeId=n,this.observer=e,this.debug=i,this.serverState=new w(s)}start(){this.observer.restartElectionTimer()}handleMessage(n){void 0!==n&&(function T(r){return"object"==typeof r&&"term"in r&&"candidateId"in r&&"lastLogIndex"in r&&"lastLogTerm"in r}(n)?this.handleRequestVoteRequest(n):function I(r){return"object"==typeof r&&"term"in r&&"voteGranted"in r&&"id"in r}(n)?this.handleRequestVoteResponse(n):function b(r){return"object"==typeof r&&"term"in r&&"leaderId"in r&&"prevLogIndex"in r&&"prevLogTerm"in r&&"entries"in r&&"leaderCommit"in r}(n)?this.handleAppendEntriesRequest(n):function M(r){return"object"==typeof r&&"term"in r&&"success"in r&&"id"in r&&"lastLogIndex"in r}(n)?this.handleAppendEntriesResponse(n):function L(r){return"object"==typeof r&&"content"in r&&"term"in r}(n)?this.handleCommand(n):this.warn("invalid message: ",n))}handleRequestVoteRequest(n){this.print("Handle RequestVoteRequest: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term);let e=!1;n.term===this.serverState.currentTerm&&(void 0===this.serverState.votedFor||this.serverState.votedFor===n.candidateId)&&this.serverState.isUpToDate(n.lastLogIndex,n.lastLogTerm)&&(this.serverState.votedFor=n.candidateId,e=!0,this.observer.restartElectionTimer()),this.requestVoteResponse(n.candidateId,e)}handleRequestVoteResponse(n){this.print("Handle RequestVoteResponse: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term),this.role instanceof p&&n.voteGranted&&n.term===this.serverState.currentTerm&&(this.role.addVote(n.id),this.role.countVotes()>this.majority()&&this.becomeLeader())}handleAppendEntriesRequest(n){this.print("Handle AppendEntriesRequest: ",n),(n.term>this.serverState.currentTerm||this.role instanceof p&&this.serverState.currentTerm==n.term)&&this.becomeFollower(n.term,n.leaderId),this.role instanceof g&&(this.role.leaderId=n.leaderId),this.observer.restartElectionTimer(),n.term<this.serverState.currentTerm||!this.serverState.hasLogAtIndex(n.prevLogIndex)||n.prevLogTerm!==this.serverState.getLogTerm(n.prevLogIndex)?this.appendEntriesResponse(n.leaderId,!1):(this.serverState.replaceInvalidLogs(n.prevLogIndex)&&this.print("Removed invalid logs after index ",n.prevLogIndex),this.serverState.log.push(...n.entries),n.leaderCommit>this.serverState.commitIndex&&(this.serverState.commitIndex=Math.min(n.leaderCommit,this.serverState.log.length),this.serverState.fetchCommittedLogs().forEach(i=>this.observer.onLog(i)),this.print("Leader increased commitIndex to: ",this.serverState.commitIndex),this.observer.onStateChange(this.getMetaData())),this.appendEntriesResponse(n.leaderId,!0),this.sendUnsentCommands())}handleAppendEntriesResponse(n){if(this.print("Handle AppendEntriesResponse: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term,n.id),this.role instanceof c){if(!n.success){this.role.decrementNexIndex(n.id);let e=this.role.nextIndex.get(n.id);if(void 0===e)return void this.warn("Missing entry in nextIndex for: ",n.id);let i=this.serverState.getLogTerm(e),s=this.serverState.log.slice(e);return void this.appendEntriesRequest(n.id,e,i,s)}n.lastLogIndex>this.role.matchIndex.get(n.id)&&(this.role.nextIndex.set(n.id,n.lastLogIndex+1),this.role.matchIndex.set(n.id,n.lastLogIndex),this.advanceCommitIndex())}else this.warn("handleAppendEntriesResponse: node is not leader ",n)}command(n){this.role instanceof g&&void 0!==this.role.leaderId?this.log(this.role.leaderId,n):this.role instanceof c?this.handleCommand({term:this.serverState.currentTerm,content:n}):this.commandBuffer.push(n)}handleCommand(n){if(this.role instanceof c){this.print("Received command: ",n);let e=this.serverState.lastLogIndex,i=this.serverState.lastLogTerm;this.serverState.log.push(n),this._cluster.forEach(s=>this.appendEntriesRequest(s,e,i,[n]))}else this.warn("Cant handle command as: ",this.role)}requestVoteRequest(n){let e={term:this.serverState.currentTerm,candidateId:this._nodeId,lastLogIndex:this.serverState.lastLogIndex,lastLogTerm:this.serverState.getLogTerm(this.serverState.lastLogIndex)};this.observer.sendMessage(n,e),this.print("Send requestVoteRequest: ",e)}requestVoteResponse(n,e){let i={term:this.serverState.currentTerm,voteGranted:e,id:this.nodeId};this.observer.sendMessage(n,i),this.print("Send requestVoteResponse: ",i)}appendEntriesRequest(n,e,i,s=[]){let o={term:this.serverState.currentTerm,leaderId:this._nodeId,prevLogIndex:e,prevLogTerm:i,entries:s,leaderCommit:this.serverState.commitIndex};this.observer.sendMessage(n,o),this.print("Send appendEntriesRequest: ",o)}appendEntriesResponse(n,e){let i={term:this.serverState.currentTerm,success:e,id:this.nodeId,lastLogIndex:this.serverState.lastLogIndex};this.observer.sendMessage(n,i),this.print("Send appendEntriesResponse: ",i)}log(n,e){let i={term:this.serverState.currentTerm,content:e};this.observer.sendMessage(n,i),this.print("Send command: ",i)}sendUnsentCommands(){this.commandBuffer.forEach(n=>this.command(n)),this.commandBuffer=[]}becomeFollower(n,e){this.print("New role: FOLLOWER, term: ",n," leader: ",e),void 0!==n&&(this.serverState.currentTerm=n),this.serverState.votedFor=void 0,this.role=new g(e),this.observer.restartElectionTimer(),this.observer.onStateChange(this.getMetaData())}becomeCandidate(){this.print("New role: CANDIDATE"),this.role=new p,this.serverState.currentTerm++,this.serverState.votedFor=this._nodeId,this.role.addVote(this._nodeId),this.observer.restartElectionTimer(),this._cluster.forEach(n=>this.requestVoteRequest(n)),this.observer.onStateChange(this.getMetaData())}becomeLeader(){this.print("New role: LEADER");let n=new Map,e=new Map;this._cluster.forEach(i=>{n.set(i,this.serverState.log.length+1),e.set(i,0)}),this.role=new c(n,e),this._cluster.forEach(i=>this.appendEntriesRequest(i,this.serverState.lastLogIndex,this.serverState.lastLogTerm)),this.observer.restartHeartbeatTimer(),this.observer.onStateChange(this.getMetaData())}advanceCommitIndex(){if(this.role instanceof c){let n=Array.from(this.role.matchIndex.values()).filter(i=>i>this.serverState.commitIndex&&this.serverState.getLogTerm(i)===this.serverState.currentTerm),e=this.majority();if(n.length<e)return;n.sort((i,s)=>i-s),this.serverState.commitIndex=n[e-1],this.serverState.fetchCommittedLogs().forEach(i=>this.observer.onLog(i)),this.print("Increased commitIndex to: ",this.serverState.commitIndex),this.observer.onStateChange(this.getMetaData())}else this.warn("Cant advance commit as: ",this.role)}majority(){return Math.floor(this._cluster.size/2)+1}timeout(){if((this.role instanceof g||this.role instanceof p)&&(this.print("Election timeout"),this.becomeCandidate()),this.role instanceof c){this.print("Heartbeat");for(const n of this._cluster){let e=this.role.matchIndex.get(n);if(void 0!==e){let i=this.serverState.getMissingLogs(e);this.appendEntriesRequest(n,this.serverState.lastLogIndex,this.serverState.lastLogTerm,i)}else this.warn("Missing matchIndex entry for : ",n)}this.observer.restartHeartbeatTimer()}}addNode(n){let e=this._cluster.size;return this._cluster.add(n),this._cluster.size>e&&(this.role instanceof c&&(this.role.nextIndex.set(n,this.serverState.log.length+1),this.role.matchIndex.set(n,0)),!0)}print(...n){this.debug&&console.log(...n)}warn(...n){this.debug&&console.warn(...n)}isLeader(){return this.role instanceof c}isFollower(){return this.role instanceof g}isCandidate(){return this.role instanceof p}get nodeId(){return this._nodeId}get allLogs(){return this.serverState.log}get clusterSize(){return this._cluster.size+1}get commitIndex(){return this.serverState.commitIndex}get cluster(){return this._cluster}get term(){return this.serverState.currentTerm}get lastLogIndex(){return this.serverState.lastLogIndex}getCurrentRole(){return this.isCandidate()?"Candidate":this.isLeader()?"Leader":this.isFollower()?"Follower":""}getMetaData(){return{lastLogIndex:this.lastLogIndex,role:this.getCurrentRole(),term:this.term}}}var A=l(3125);let Z=(()=>{class r{constructor(e){this.channelName="raft",this._isConnected=!0,this.communicationService=e,this.timer=new x,this.node=new R(this.identifier.uuid,this,!0)}openChannel(e,i){this.closeChannel(),this.channelName=e,this.observer=i,this.communicationService.openChannel(this.channelName,this)}closeChannel(){this.timer.stop(),this.communicationService.closeChannel()}start(){this.node.start()}performAction(e){return this.node.command(e),!0}onLog(e){var i;if((0,C.rz)(e.content))return null===(i=this.observer)||void 0===i||i.onMessage(e.content),void console.log("Log applied: ",e);console.warn("Log doesnt contain payload, ",e)}sendMessage(e,i){this._isConnected&&this.communicationService.send(i,e)}onMessage(e,i){this._isConnected&&this.node.handleMessage(e)}onNode(e){var s;this.node.addNode(e)&&(console.log("Added node: ",e," to cluster"),null===(s=this.observer)||void 0===s||s.onNode(e))}checkTime(){let e=this.timer.remainingTime();this.timer.isTimeUp()?this.node.timeout():void 0!==e&&setTimeout(()=>this.checkTime(),e)}restartElectionTimer(){this.timer.randomDuration();let e=this.timer.remainingTime();void 0!==e&&setTimeout(()=>this.checkTime(),e)}restartHeartbeatTimer(){this.timer.fixedDuration();let e=this.timer.remainingTime();void 0!==e&&setTimeout(()=>this.checkTime(),e)}get nodes(){return this.node.cluster}get identifier(){return this.communicationService.identifier}set isConnected(e){this._isConnected=e}get isConnected(){return this._isConnected}onStateChange(e){var i;null===(i=this.observer)||void 0===i||i.onStateChange(e)}getMetaData(){return this.node.getMetaData()}isActive(){return this.timer.isActive()}get receivedMessageCounter(){return this.communicationService.receivedMessageCounter}get totalMessageCounter(){return this.communicationService.totalMessageCounter}onMessageCounterUpdate(e,i){var s;null===(s=this.observer)||void 0===s||s.onMessageCounterUpdate(e,i)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(A.O))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var E=l(5220),N=l(6070);function P(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"ion-col",3)(2,"ion-button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.start())}),t._uU(3,"Start"),t.qZA()()()}}function U(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"th",16)(1,"ion-toolbar")(2,"ion-buttons",17)(3,"ion-button",18),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.insertColumn(o))}),t._UZ(4,"ion-icon",13),t.qZA()(),t._uU(5),t.TgZ(6,"ion-buttons",19)(7,"ion-button",20),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteColumn(o))}),t._UZ(8,"ion-icon",21),t.qZA()()()()}if(2&r){const e=n.index;t.xp6(5),t.hij(" ",e+1," ")}}const S=function(r,n){return{column:r,row:n}};function y(r,n){if(1&r&&(t.TgZ(0,"div")(1,"div",26),t._uU(2),t.qZA()()),2&r){const e=t.oxw().$implicit,i=t.oxw().$implicit,s=t.oxw();let o;t.xp6(2),t.hij(" ",null==(o=s.table.get(t.WLB(1,S,e,i)))?null:o.content," ")}}function F(r,n){if(1&r&&t._uU(0),2&r){const e=t.oxw().$implicit,i=t.oxw().$implicit,s=t.oxw();let o;t.hij(" ",null==(o=s.table.get(t.WLB(1,S,e,i)))?null:o.content," ")}}function k(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"td",23),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw().$implicit,V=t.oxw();return t.KtG(V.selectCell(o,d))}),t.YNc(1,y,3,4,"div",24),t.YNc(2,F,1,4,"ng-template",null,25,t.W1O),t.qZA()}if(2&r){const e=n.$implicit,i=t.MAs(3),s=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.currentCell.row===s&&o.currentCell.column===e)("ngIfElse",i)}}function D(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td",10)(2,"ion-toolbar")(3,"ion-buttons",17)(4,"ion-button",18),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.insertRow(o))}),t._UZ(5,"ion-icon",13),t.qZA()(),t._uU(6),t.TgZ(7,"ion-buttons",19)(8,"ion-button",20),t.NdJ("click",function(){const o=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteRow(o))}),t._UZ(9,"ion-icon",21),t.qZA()()()(),t.YNc(10,k,4,2,"td",22),t.qZA()}if(2&r){const e=n.index,i=t.oxw();t.xp6(6),t.hij(" ",e+1," "),t.xp6(4),t.Q6J("ngForOf",i.table.columns)}}const O=[{path:"",component:(()=>{class r{constructor(e,i,s,o){this._nodes=new Set,this.channelName="consistent",this._raftMetaData={term:0,role:"",lastLogIndex:0},this._receivedMessageCounter=0,this._totalMessageCounter=0,this.raftService=e,this.spreadsheetService=i,this.ngZone=s,this.consistencyChecker=o,this._table=this.spreadsheetService.getTable(),this._currentCell=this.spreadsheetService.getCellByIndex(1,1)}ngOnInit(){this.consistencyChecker.subscribe(this.raftService.identifier.uuid,this.table,e=>{console.log("All updates applied ",e),this.ngZone.run(()=>this._trackedTime=e)})}ngAfterViewInit(){this.ionInput=document.getElementsByName("consistent-input")[0]}ionViewDidEnter(){this.raftService.openChannel(this.channelName,this)}start(){this.raftService.start()}selectCell(e,i){var s;this._currentCell=this.spreadsheetService.getCellById({column:e,row:i}),this.table.rows.length>0&&this.table.columns.length>0&&(null===(s=this.ionInput)||void 0===s||s.setFocus())}addRow(){let e=this.identifier.next(),i=u.Z.addRow(e);this.performAction(i)}insertRow(e){let i=this.identifier.next(),s=u.Z.insertRow(i,e);this.performAction(s)}deleteRow(e){let i=u.Z.deleteRow(e);this.performAction(i)}addColumn(){let e=this.identifier.next(),i=u.Z.addColumn(e);this.performAction(i)}insertColumn(e){let i=this.identifier.next(),s=u.Z.insertColumn(i,e);this.performAction(s)}deleteColumn(e){let i=u.Z.deleteColumn(e);this.performAction(i)}insertCell(e){let i=u.Z.insertCell(e.address,e.input);this.performAction(i)}performAction(e){this.consistencyChecker.modifiedState(),this.ngZone.run(()=>this._trackedTime=void 0),this.raftService.performAction(e)}deleteCell(e){e.input="",this.insertCell(e)}getCell(e,i){return this.spreadsheetService.getTable().get({column:e,row:i})}get currentCell(){return(-1===this._table.rows.indexOf(this._currentCell.row)||-1===this._table.columns.indexOf(this._currentCell.column))&&this.selectCell(this._table.columns[0],this._table.rows[0]),this._currentCell}onMessage(e){(0,C.rz)(e)?(this.handleAction(e),this.ngZone.run(()=>this._table=this.spreadsheetService.getTable()),this.consistencyChecker.updateApplied(this.table)):console.warn("Invalid message",e)}onNode(e){this._nodes.add(e),this.ngZone.run(()=>this._nodes=this.raftService.nodes)}onStateChange(e){this.ngZone.run(()=>this._raftMetaData=e)}handleAction(e){switch(e.action){case h.U.INSERT_CELL:this.spreadsheetService.insertCellById({column:e.column,row:e.row},e.input);break;case h.U.ADD_ROW:this.spreadsheetService.addRow(e.input);break;case h.U.INSERT_ROW:this.spreadsheetService.insertRow(e.input,e.row);break;case h.U.ADD_COLUMN:this.spreadsheetService.addColumn(e.input);break;case h.U.INSERT_COLUMN:this.spreadsheetService.insertColumn(e.input,e.column);break;case h.U.DELETE_COLUMN:this.spreadsheetService.deleteColumn(e.column);break;case h.U.DELETE_ROW:this.spreadsheetService.deleteRow(e.row);break;default:console.warn("Cant perform action for message: ",e)}}get table(){return this._table=this.spreadsheetService.getTable(),this._table}set table(e){this._table=e}get nodes(){return this._nodes=this.raftService.nodes,this._nodes}get clusterSize(){return this.nodes.size}get identifier(){return this.raftService.identifier}get connectionEnabled(){return this.raftService.isConnected}set connectionEnabled(e){this.raftService.isConnected=e}get raftMetaData(){return this._raftMetaData=this.raftService.getMetaData(),this._raftMetaData}get trackedTime(){return this._trackedTime}get isActive(){return this.raftService.isActive()}get receivedMessageCounter(){return this._receivedMessageCounter=this.raftService.receivedMessageCounter,this._receivedMessageCounter}get totalMessageCounter(){return this._totalMessageCounter=this.raftService.totalMessageCounter,this._totalMessageCounter}onMessageCounterUpdate(e,i){this.ngZone.run(()=>{this._receivedMessageCounter=e,this._totalMessageCounter=i})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Z),t.Y36(E.t),t.Y36(t.R0b),t.Y36(N.x))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-consistent-spreadsheet"]],decls:53,vars:15,consts:[[3,"fullscreen"],["color","primary"],["size","large"],["size","auto"],[3,"ngModel","ngModelChange"],[4,"ngIf"],[1,"ion-padding-top"],[3,"submit"],["name","consistent-input","fill","outline",3,"ngModel","ngModelChange"],[1,"spreadsheet"],[1,"table-header","small-cell"],["class","table-header cell",4,"ngFor","ngForOf"],["color","primary",3,"click"],["name","add"],[4,"ngFor","ngForOf"],[3,"click"],[1,"table-header","cell"],["slot","start"],["fill","clear","size","small","color","success",3,"click"],["slot","end"],["fill","clear","size","small","color","danger",3,"click"],["name","close-circle-outline"],["class","ion-text-right cell",3,"click",4,"ngFor","ngForOf"],[1,"ion-text-right","cell",3,"click"],[4,"ngIf","ngIfElse"],["cellValue",""],[1,"selected"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title",2),t._uU(4,"consistent-spreadsheet"),t.qZA()()(),t.TgZ(5,"ion-grid")(6,"ion-row")(7,"ion-col",3)(8,"ion-toggle",4),t.NdJ("ngModelChange",function(o){return i.connectionEnabled=o}),t.TgZ(9,"ion-title"),t._uU(10,"Global coordination"),t.qZA()()(),t.TgZ(11,"ion-col",3)(12,"ion-title"),t._uU(13),t.qZA()(),t.TgZ(14,"ion-col",3)(15,"ion-title"),t._uU(16),t.qZA()(),t.TgZ(17,"ion-col",3)(18,"ion-title"),t._uU(19),t.qZA()(),t.TgZ(20,"ion-col",3)(21,"ion-title"),t._uU(22),t.qZA()()(),t.TgZ(23,"ion-row")(24,"ion-col",3)(25,"ion-title"),t._uU(26),t.qZA()(),t.TgZ(27,"ion-col",3)(28,"ion-title"),t._uU(29),t.qZA()(),t.TgZ(30,"ion-col",3)(31,"ion-title"),t._uU(32),t.qZA()()(),t.TgZ(33,"ion-row"),t.YNc(34,P,4,0,"div",5),t.TgZ(35,"ion-col",3)(36,"ion-title",6),t._uU(37),t.qZA()(),t.TgZ(38,"ion-col")(39,"form",7),t.NdJ("submit",function(){return i.insertCell(i.currentCell)}),t.TgZ(40,"ion-input",8),t.NdJ("ngModelChange",function(o){return i.currentCell.input=o}),t.qZA()()()()(),t.TgZ(41,"div",9)(42,"table")(43,"thead")(44,"tr"),t._UZ(45,"th",10),t.YNc(46,U,9,1,"th",11),t.TgZ(47,"ion-button",12),t.NdJ("click",function(){return i.addColumn()}),t._UZ(48,"ion-icon",13),t.qZA()()(),t.TgZ(49,"tbody"),t.YNc(50,D,11,2,"tr",14),t.qZA()()(),t.TgZ(51,"ion-button",12),t.NdJ("click",function(){return i.addRow()}),t._UZ(52,"ion-icon",13),t.qZA()()),2&e&&(t.Q6J("fullscreen",!0),t.xp6(8),t.Q6J("ngModel",i.connectionEnabled),t.xp6(5),t.hij("Remote nodes: ",i.clusterSize,""),t.xp6(3),t.hij("Time: ",i.trackedTime,""),t.xp6(3),t.hij("Received messages: ",i.receivedMessageCounter,""),t.xp6(3),t.hij("Total messages: ",i.totalMessageCounter,""),t.xp6(4),t.hij("Current role: ",i.raftMetaData.role,""),t.xp6(3),t.hij("Current term: ",i.raftMetaData.term,""),t.xp6(3),t.hij("Last log index: ",i.raftMetaData.lastLogIndex,""),t.xp6(2),t.Q6J("ngIf",i.nodes.size>1&&!i.isActive),t.xp6(3),t.AsE("",i.currentCell.colIndex,"|",i.currentCell.rowIndex,""),t.xp6(3),t.Q6J("ngModel",i.currentCell.input),t.xp6(6),t.Q6J("ngForOf",i.table.columns),t.xp6(4),t.Q6J("ngForOf",i.table.rows))},dependencies:[f.sg,f.O5,m._Y,m.JJ,m.JL,m.On,m.F,a.YG,a.Sm,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Nd,a.wd,a.ho,a.sr,a.w,a.j9],styles:["table-header[_ngcontent-%COMP%]{color:gray;text-align:center}.small-cell[_ngcontent-%COMP%]{width:120px}.cell[_ngcontent-%COMP%]{width:150px}.selected[_ngcontent-%COMP%]{border:solid 5px black;height:50px;min-width:150px}.spreadsheet[_ngcontent-%COMP%]{overflow-x:auto}.spreadsheet[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed;width:100%}.spreadsheet[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spreadsheet[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:solid 1px lightgray}"]}),r})()}];let j=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[_.Bz.forChild(O),_.Bz]}),r})(),J=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[f.ez,m.u5,a.Pc,j]}),r})()}}]);