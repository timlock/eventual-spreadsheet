"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3087],{3087:(z,v,d)=>{d.r(v),d.d(v,{ConsistentSpreadsheetPageModule:()=>q});var f=d(6814),m=d(95),a=d(5548),_=d(5785),c=d(1940),C=d(394),u=d(6148),e=d(6689);class x{constructor(n=150,t=300,i=50){this.min=n,this.max=t,this.fixed=i}fixedDuration(){this.end=this.fixed+Date.now()}randomDuration(){this.end=Math.floor(Math.random()*(this.max-this.min)+this.min+Date.now())}stop(){this.end=void 0}isActive(){return void 0!==this.end}isTimeUp(){return void 0!==this.end&&Date.now()>=this.end}remainingTime(){if(void 0!==this.end)return this.end-Date.now()}}class h{constructor(n,t){this._nextIndex=n,this._matchIndex=t}get nextIndex(){return this._nextIndex}get matchIndex(){return this._matchIndex}decrementNexIndex(n){let t=this._nextIndex.get(n);void 0!==t&&t>0&&(t--,this._nextIndex.set(n,t))}}class p{constructor(){this.votes=new Set}addVote(n){this.votes.add(n)}countVotes(){return this.votes.size}}class g{constructor(n){this._leaderId=n}set leaderId(n){this._leaderId=n}get leaderId(){return this._leaderId}}class w{constructor(n=[]){this._logs=n,this._currentTerm=0,this._commitIndex=0,this.lastApplied=0}fetchCommittedLogs(){if(this.lastApplied<this.commitIndex){let n=this._logs.slice(this.lastApplied,this.commitIndex);return this.lastApplied=this.commitIndex,n}return[]}getMissingLogs(n){return this._logs.slice(n)}replaceInvalidLogs(n){return void 0!==this._logs[n]&&(this._logs.splice(n),!0)}get currentTerm(){return this._currentTerm}set currentTerm(n){this._currentTerm=n}get votedFor(){return this._votedFor}set votedFor(n){this._votedFor=n}getLogTerm(n){var t;return null===(t=this._logs[n-1])||void 0===t?void 0:t.term}hasLogAtIndex(n){return void 0!==this._logs[n-1]||0==n}get logs(){return this._logs}get commitIndex(){return this._commitIndex}set commitIndex(n){this._commitIndex=n}get lastLogIndex(){return this._logs.length}get lastLogTerm(){var n;return null===(n=this._logs[this._logs.length-1])||void 0===n?void 0:n.term}isUpToDate(n,t){return void 0!==t&&void 0!==this.lastLogTerm&&(t>this.lastLogTerm||t===this.lastLogTerm&&n>this.lastLogIndex)||t===this.lastLogTerm&&n>=this.lastLogIndex||void 0!==t&&void 0===this.lastLogTerm}}class R{constructor(n,t,i=!1,r=[]){this._nodeId=n,this.observer=t,this.debug=i,this.role=new g,this._cluster=new Set,this.commandBuffer=[],this.serverState=new w(r)}start(){this.observer.restartElectionTimer()}handleMessage(n){void 0!==n&&(function T(s){return"object"==typeof s&&"term"in s&&"candidateId"in s&&"lastLogIndex"in s&&"lastLogTerm"in s}(n)?this.handleRequestVoteRequest(n):function I(s){return"object"==typeof s&&"term"in s&&"voteGranted"in s&&"id"in s}(n)?this.handleRequestVoteResponse(n):function b(s){return"object"==typeof s&&"term"in s&&"leaderId"in s&&"prevLogIndex"in s&&"prevLogTerm"in s&&"entries"in s&&"leaderCommit"in s}(n)?this.handleAppendEntriesRequest(n):function M(s){return"object"==typeof s&&"term"in s&&"success"in s&&"id"in s&&"lastLogIndex"in s}(n)?this.handleAppendEntriesResponse(n):function L(s){return"object"==typeof s&&"content"in s&&"term"in s}(n)?this.handleCommand(n):this.warn("invalid message: ",n))}handleRequestVoteRequest(n){this.print("Handle RequestVoteRequest: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term);let t=!1;n.term===this.serverState.currentTerm&&(void 0===this.serverState.votedFor||this.serverState.votedFor===n.candidateId)&&this.serverState.isUpToDate(n.lastLogIndex,n.lastLogTerm)&&(this.serverState.votedFor=n.candidateId,t=!0,this.observer.restartElectionTimer()),this.requestVoteResponse(n.candidateId,t)}handleRequestVoteResponse(n){this.print("Handle RequestVoteResponse: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term),this.role instanceof p&&n.voteGranted&&n.term===this.serverState.currentTerm&&(this.role.addVote(n.id),this.role.countVotes()>=this.majority()&&this.becomeLeader())}handleAppendEntriesRequest(n){this.print("Handle AppendEntriesRequest: ",n),(n.term>this.serverState.currentTerm||this.role instanceof p&&this.serverState.currentTerm==n.term)&&this.becomeFollower(n.term,n.leaderId),this.role instanceof g&&(this.role.leaderId=n.leaderId),this.observer.restartElectionTimer(),n.term<this.serverState.currentTerm||!this.serverState.hasLogAtIndex(n.prevLogIndex)||n.prevLogTerm!==this.serverState.getLogTerm(n.prevLogIndex)?this.appendEntriesResponse(n.leaderId,!1):(this.serverState.replaceInvalidLogs(n.prevLogIndex)&&this.print("Removed invalid logs after index ",n.prevLogIndex),this.serverState.logs.push(...n.entries),n.leaderCommit>this.serverState.commitIndex&&(this.serverState.commitIndex=Math.min(n.leaderCommit,this.serverState.logs.length),this.serverState.fetchCommittedLogs().forEach(i=>this.observer.onLog(i)),this.print("Leader increased commitIndex to: ",this.serverState.commitIndex),this.observer.onStateChange(this.getMetaData())),this.appendEntriesResponse(n.leaderId,!0),this.sendUnsentCommands())}handleAppendEntriesResponse(n){if(this.print("Handle AppendEntriesResponse: ",n),n.term>this.serverState.currentTerm&&this.becomeFollower(n.term,n.id),this.role instanceof h){if(!n.success){this.role.decrementNexIndex(n.id);let t=this.role.nextIndex.get(n.id);if(void 0===t)return void this.warn("Missing entry in nextIndex for: ",n.id);let i=this.serverState.getLogTerm(t),r=this.serverState.logs.slice(t);return void this.appendEntriesRequest(n.id,t,i,r)}n.lastLogIndex>this.role.matchIndex.get(n.id)&&(this.role.nextIndex.set(n.id,n.lastLogIndex+1),this.role.matchIndex.set(n.id,n.lastLogIndex),this.advanceCommitIndex())}else this.warn("handleAppendEntriesResponse: node is not leader ",n)}command(n){this.role instanceof g&&void 0!==this.role.leaderId?this.log(this.role.leaderId,n):this.role instanceof h?this.handleCommand({term:this.serverState.currentTerm,content:n}):this.commandBuffer.push(n)}handleCommand(n){if(this.role instanceof h){this.print("Received command: ",n);let t=this.serverState.lastLogIndex,i=this.serverState.lastLogTerm;this.serverState.logs.push(n),this._cluster.forEach(r=>this.appendEntriesRequest(r,t,i,[n]))}else this.warn("Cant handle command as: ",this.role)}requestVoteRequest(n){let t={term:this.serverState.currentTerm,candidateId:this._nodeId,lastLogIndex:this.serverState.lastLogIndex,lastLogTerm:this.serverState.getLogTerm(this.serverState.lastLogIndex)};this.observer.sendMessage(n,t),this.print("Send requestVoteRequest: ",t)}requestVoteResponse(n,t){let i={term:this.serverState.currentTerm,voteGranted:t,id:this.nodeId};this.observer.sendMessage(n,i),this.print("Send requestVoteResponse: ",i)}appendEntriesRequest(n,t,i,r=[]){let o={term:this.serverState.currentTerm,leaderId:this._nodeId,prevLogIndex:t,prevLogTerm:i,entries:r,leaderCommit:this.serverState.commitIndex};this.observer.sendMessage(n,o),this.print("Send appendEntriesRequest: ",o)}appendEntriesResponse(n,t){let i={term:this.serverState.currentTerm,success:t,id:this.nodeId,lastLogIndex:this.serverState.lastLogIndex};this.observer.sendMessage(n,i),this.print("Send appendEntriesResponse: ",i)}log(n,t){let i={term:this.serverState.currentTerm,content:t};this.observer.sendMessage(n,i),this.print("Send command: ",i)}sendUnsentCommands(){this.commandBuffer.forEach(n=>this.command(n)),this.commandBuffer=[]}becomeFollower(n,t){this.print("New role: FOLLOWER, term: ",n," leader: ",t),void 0!==n&&(this.serverState.currentTerm=n),this.serverState.votedFor=void 0,this.role=new g(t),this.observer.restartElectionTimer(),this.observer.onStateChange(this.getMetaData())}becomeCandidate(){this.print("New role: CANDIDATE"),this.role=new p,this.serverState.currentTerm++,this.serverState.votedFor=this._nodeId,this.role.addVote(this._nodeId),this.observer.restartElectionTimer(),this._cluster.forEach(n=>this.requestVoteRequest(n)),this.observer.onStateChange(this.getMetaData())}becomeLeader(){this.print("New role: LEADER");let n=new Map,t=new Map;this._cluster.forEach(i=>{n.set(i,this.serverState.logs.length+1),t.set(i,0)}),this.role=new h(n,t),this._cluster.forEach(i=>this.appendEntriesRequest(i,this.serverState.lastLogIndex,this.serverState.lastLogTerm)),this.observer.restartHeartbeatTimer(),this.observer.onStateChange(this.getMetaData())}advanceCommitIndex(){if(this.role instanceof h){let n=Array.from(this.role.matchIndex.values()).filter(i=>i>this.serverState.commitIndex&&this.serverState.getLogTerm(i)===this.serverState.currentTerm),t=this.majority();if(n.length<t)return;n.sort((i,r)=>i-r),this.serverState.commitIndex=n[t-1],this.serverState.fetchCommittedLogs().forEach(i=>this.observer.onLog(i)),this.print("Increased commitIndex to: ",this.serverState.commitIndex),this.observer.onStateChange(this.getMetaData())}else this.warn("Cant advance commit as: ",this.role)}majority(){return Math.floor(this._cluster.size/2)+1}timeout(){if((this.role instanceof g||this.role instanceof p)&&(this.print("Election timeout"),this.becomeCandidate()),this.role instanceof h){this.print("Heartbeat");for(const n of this._cluster){let t=this.role.matchIndex.get(n);if(void 0!==t){let i=this.serverState.getMissingLogs(t);this.appendEntriesRequest(n,this.serverState.lastLogIndex,this.serverState.lastLogTerm,i)}else this.warn("Missing matchIndex entry for : ",n)}this.observer.restartHeartbeatTimer()}}addNode(n){let t=this._cluster.size;return this._cluster.add(n),this._cluster.size>t&&(this.role instanceof h&&(this.role.nextIndex.set(n,this.serverState.logs.length+1),this.role.matchIndex.set(n,0)),!0)}print(...n){this.debug&&console.log(...n)}warn(...n){this.debug&&console.warn(...n)}isLeader(){return this.role instanceof h}isFollower(){return this.role instanceof g}isCandidate(){return this.role instanceof p}get nodeId(){return this._nodeId}get allLogs(){return this.serverState.logs}get clusterSize(){return this._cluster.size+1}get commitIndex(){return this.serverState.commitIndex}get cluster(){return this._cluster}get term(){return this.serverState.currentTerm}get lastLogIndex(){return this.serverState.lastLogIndex}getCurrentRole(){return this.isCandidate()?"Candidate":this.isLeader()?"Leader":this.isFollower()?"Follower":""}getMetaData(){return{lastLogIndex:this.lastLogIndex,role:this.getCurrentRole(),term:this.term}}}var Z=d(3125);let A=(()=>{class s{constructor(t){this.communicationService=t,this.channelName="raft",this._isConnected=!0,this.timer=new x,this.node=new R(this.identifier.uuid,this,!0)}openChannel(t,i){this.closeChannel(),this.channelName=t,this.observer=i,this.communicationService.openChannel(this.channelName,this)}closeChannel(){this.timer.stop(),this.communicationService.closeChannel()}start(){this.node.start()}performAction(t){return this.node.command(t),!0}onLog(t){var i;if((0,C.rz)(t.content))return null===(i=this.observer)||void 0===i||i.onMessage(t.content),void console.log("Log applied: ",t);console.warn("Log doesnt contain payload, ",t)}sendMessage(t,i){this._isConnected&&this.communicationService.send(i,t)}onMessage(t,i){this._isConnected&&this.node.handleMessage(t)}onNode(t){var r;this.node.addNode(t)&&(console.log("Added node: ",t," to cluster"),null===(r=this.observer)||void 0===r||r.onNode(t))}checkTime(){let t=this.timer.remainingTime();this.timer.isTimeUp()?this.node.timeout():void 0!==t&&setTimeout(()=>this.checkTime(),t)}restartElectionTimer(){this.timer.randomDuration();let t=this.timer.remainingTime();void 0!==t&&setTimeout(()=>this.checkTime(),t)}restartHeartbeatTimer(){this.timer.fixedDuration();let t=this.timer.remainingTime();void 0!==t&&setTimeout(()=>this.checkTime(),t)}get nodes(){return this.node.cluster}get identifier(){return this.communicationService.identifier}set isConnected(t){this._isConnected=t}get isConnected(){return this._isConnected}onStateChange(t){var i;null===(i=this.observer)||void 0===i||i.onStateChange(t)}getMetaData(){return this.node.getMetaData()}isActive(){return this.timer.isActive()}get receivedMessageCounter(){return this.communicationService.receivedMessageCounter}get sentMessageCounter(){return this.communicationService.sentMessageCounter}onMessageCounterUpdate(t,i){var r;null===(r=this.observer)||void 0===r||r.onMessageCounterUpdate(t,i)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Z.O))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var E=d(5220),U=d(4614);function N(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div")(1,"ion-button",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.start())}),e._uU(2,"Start"),e.qZA()()}}function P(s,n){1&s&&(e.TgZ(0,"div")(1,"ion-button",17),e._uU(2,"Start"),e.qZA()()),2&s&&(e.xp6(1),e.Q6J("disabled",!0))}function y(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"th",18)(1,"ion-toolbar")(2,"ion-buttons",19)(3,"ion-button",20),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.insertColumn(o))}),e._UZ(4,"ion-icon",14),e.qZA()(),e._uU(5),e.TgZ(6,"ion-buttons",21)(7,"ion-button",22),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deleteColumn(o))}),e._UZ(8,"ion-icon",23),e.qZA()()()()}if(2&s){const t=n.index;e.xp6(5),e.hij(" ",t+1," ")}}const S=function(s,n){return{column:s,row:n}};function F(s,n){if(1&s&&(e.TgZ(0,"div")(1,"div",28),e._uU(2),e.qZA()()),2&s){const t=e.oxw().$implicit,i=e.oxw().$implicit,r=e.oxw();let o;e.xp6(2),e.hij(" ",null==(o=r.table.get(e.WLB(1,S,t,i)))?null:o.content," ")}}function k(s,n){if(1&s&&e._uU(0),2&s){const t=e.oxw().$implicit,i=e.oxw().$implicit,r=e.oxw();let o;e.hij(" ",null==(o=r.table.get(e.WLB(1,S,t,i)))?null:o.content," ")}}function D(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"td",25),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw().$implicit,V=e.oxw();return e.KtG(V.selectCell(o,l))}),e.YNc(1,F,3,4,"div",26),e.YNc(2,k,1,4,"ng-template",null,27,e.W1O),e.qZA()}if(2&s){const t=n.$implicit,i=e.MAs(3),r=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.currentCell.row===r&&o.currentCell.column===t)("ngIfElse",i)}}function O(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td",11)(2,"ion-toolbar")(3,"ion-buttons",19)(4,"ion-button",20),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.insertRow(o))}),e._UZ(5,"ion-icon",14),e.qZA()(),e._uU(6),e.TgZ(7,"ion-buttons",21)(8,"ion-button",22),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.deleteRow(o))}),e._UZ(9,"ion-icon",23),e.qZA()()()(),e.YNc(10,D,4,2,"td",24),e.qZA()}if(2&s){const t=n.index,i=e.oxw();e.xp6(6),e.hij(" ",t+1," "),e.xp6(4),e.Q6J("ngForOf",i.table.columns)}}const j=[{path:"",component:(()=>{class s{constructor(t,i,r,o){this.raftService=t,this.spreadsheetService=i,this.ngZone=r,this.consistencyChecker=o,this._nodes=new Set,this.channelName="consistent",this._raftMetaData={term:0,role:"",lastLogIndex:0},this._receivedMessageCounter=0,this._sentMessageCounter=0,this._table=this.spreadsheetService.getTable(),this._currentCell=this.spreadsheetService.getCellByIndex(1,1)}ngOnInit(){this.consistencyChecker.subscribe(this.raftService.identifier.uuid,this.table,t=>{console.log("All updates applied ",t),this.ngZone.run(()=>this._trackedTime=t)})}ngAfterViewInit(){this.ionInput=document.getElementsByName("consistent-input")[0]}ionViewDidEnter(){this.raftService.openChannel(this.channelName,this)}start(){this.raftService.start(),this.ionInput.disabled=!1}selectCell(t,i){var r;this._currentCell=this.spreadsheetService.getCellById({column:t,row:i}),this.table.rows.length>0&&this.table.columns.length>0&&(null===(r=this.ionInput)||void 0===r||r.setFocus())}addRow(){let t=this.identifier.next(),i=u.Z.addRow(t);this.performAction(i)}insertRow(t){let i=this.identifier.next(),r=u.Z.insertRow(i,t);this.performAction(r)}deleteRow(t){let i=u.Z.deleteRow(t);this.performAction(i)}addColumn(){let t=this.identifier.next(),i=u.Z.addColumn(t);this.performAction(i)}insertColumn(t){let i=this.identifier.next(),r=u.Z.insertColumn(i,t);this.performAction(r)}deleteColumn(t){let i=u.Z.deleteColumn(t);this.performAction(i)}insertCell(t){let i=u.Z.insertCell(t.address,t.input);this.performAction(i)}performAction(t){this.consistencyChecker.modifiedState(),this.ngZone.run(()=>this._trackedTime=void 0),this.raftService.performAction(t)}deleteCell(t){t.input="",this.insertCell(t)}getCell(t,i){return this.spreadsheetService.getTable().get({column:t,row:i})}get currentCell(){return(-1===this._table.rows.indexOf(this._currentCell.row)||-1===this._table.columns.indexOf(this._currentCell.column))&&this.selectCell(this._table.columns[0],this._table.rows[0]),this._currentCell}onMessage(t){(0,C.rz)(t)?(this.handleAction(t),this.ngZone.run(()=>this._table=this.spreadsheetService.getTable()),this.consistencyChecker.updateApplied(this.table)):console.warn("Invalid message",t)}onNode(t){this._nodes.add(t),this.ngZone.run(()=>this._nodes=this.raftService.nodes)}onStateChange(t){this.ngZone.run(()=>this._raftMetaData=t)}handleAction(t){switch(t.action){case c.U.INSERT_CELL:this.spreadsheetService.insertCellById({column:t.column,row:t.row},t.input);break;case c.U.ADD_ROW:this.spreadsheetService.addRow(t.input);break;case c.U.INSERT_ROW:this.spreadsheetService.insertRow(t.input,t.row);break;case c.U.ADD_COLUMN:this.spreadsheetService.addColumn(t.input);break;case c.U.INSERT_COLUMN:this.spreadsheetService.insertColumn(t.input,t.column);break;case c.U.DELETE_COLUMN:this.spreadsheetService.deleteColumn(t.column);break;case c.U.DELETE_ROW:this.spreadsheetService.deleteRow(t.row);break;default:console.warn("Cant perform action for message: ",t)}}get table(){return this._table=this.spreadsheetService.getTable(),this._table}set table(t){this._table=t}get nodes(){return this._nodes=this.raftService.nodes,this._nodes}get identifier(){return this.raftService.identifier}get isConnected(){return this.raftService.isConnected}set isConnected(t){this.raftService.isConnected=t,this.ionInput.disabled=!this.raftService.isConnected}get raftMetaData(){return this._raftMetaData=this.raftService.getMetaData(),this._raftMetaData}get trackedTime(){return this._trackedTime}get isActive(){return this.raftService.isActive()}get receivedMessageCounter(){return this._receivedMessageCounter=this.raftService.receivedMessageCounter,this._receivedMessageCounter}get sentMessageCounter(){return this._sentMessageCounter=this.raftService.sentMessageCounter,this._sentMessageCounter}onMessageCounterUpdate(t,i){this.ngZone.run(()=>{this._receivedMessageCounter=t,this._sentMessageCounter=i})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(A),e.Y36(E.t),e.Y36(e.R0b),e.Y36(U.x))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-consistent-spreadsheet"]],decls:71,vars:17,consts:[[3,"fullscreen"],["color","primary"],["size","large"],["lines","none"],["justify","start",3,"ngModel","ngModelChange"],[4,"ngIf"],["size","auto"],[1,"ion-padding-top"],[3,"submit"],["disabled","true","name","consistent-input","fill","outline",3,"ngModel","ngModelChange"],[1,"spreadsheet"],[1,"table-header","small-cell"],["class","table-header cell",4,"ngFor","ngForOf"],["color","primary",3,"click"],["name","add"],[4,"ngFor","ngForOf"],[3,"click"],[3,"disabled"],[1,"table-header","cell"],["slot","start"],["fill","clear","size","small","color","success",3,"click"],["slot","end"],["fill","clear","size","small","color","danger",3,"click"],["name","close-circle-outline"],["class","ion-text-right cell",3,"click",4,"ngFor","ngForOf"],[1,"ion-text-right","cell",3,"click"],[4,"ngIf","ngIfElse"],["cellValue",""],[1,"selected"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title",2),e._uU(4,"consistent-spreadsheet"),e.qZA()()(),e.TgZ(5,"ion-grid")(6,"ion-row")(7,"ion-col")(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),e._uU(11,"State"),e.qZA()(),e.TgZ(12,"ion-card-content")(13,"ion-list")(14,"ion-item")(15,"ion-label"),e._uU(16),e.qZA()(),e.TgZ(17,"ion-item")(18,"ion-label"),e._uU(19),e.qZA()(),e.TgZ(20,"ion-item")(21,"ion-label"),e._uU(22),e.qZA()(),e.TgZ(23,"ion-item")(24,"ion-label"),e._uU(25),e.qZA()(),e.TgZ(26,"ion-item",3)(27,"ion-toggle",4),e.NdJ("ngModelChange",function(o){return i.isConnected=o}),e.TgZ(28,"ion-title"),e._uU(29,"Connected"),e.qZA()()()()()()(),e.TgZ(30,"ion-col")(31,"ion-card")(32,"ion-card-header")(33,"ion-card-title"),e._uU(34,"Raft"),e.qZA()(),e.TgZ(35,"ion-card-content")(36,"ion-list")(37,"ion-item")(38,"ion-label"),e._uU(39),e.qZA()(),e.TgZ(40,"ion-item")(41,"ion-label"),e._uU(42),e.qZA()(),e.TgZ(43,"ion-item")(44,"ion-label"),e._uU(45),e.qZA()(),e.TgZ(46,"ion-item")(47,"ion-label"),e._uU(48),e.qZA()(),e.TgZ(49,"ion-item",3),e.YNc(50,N,3,0,"div",5),e.YNc(51,P,3,1,"div",5),e.qZA()()()()()(),e.TgZ(52,"ion-row")(53,"ion-col",6)(54,"ion-title",7),e._uU(55),e.qZA()(),e.TgZ(56,"ion-col")(57,"form",8),e.NdJ("submit",function(){return i.insertCell(i.currentCell)}),e.TgZ(58,"ion-input",9),e.NdJ("ngModelChange",function(o){return i.currentCell.input=o}),e.qZA()()()()(),e.TgZ(59,"div",10)(60,"table")(61,"thead")(62,"tr"),e._UZ(63,"th",11),e.YNc(64,y,9,1,"th",12),e.TgZ(65,"ion-button",13),e.NdJ("click",function(){return i.addColumn()}),e._UZ(66,"ion-icon",14),e.qZA()()(),e.TgZ(67,"tbody"),e.YNc(68,O,11,2,"tr",15),e.qZA()()(),e.TgZ(69,"ion-button",13),e.NdJ("click",function(){return i.addRow()}),e._UZ(70,"ion-icon",14),e.qZA()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(16),e.hij("Remote nodes: ",i.nodes.size,""),e.xp6(3),e.hij("Time: ",i.trackedTime,""),e.xp6(3),e.hij("Received messages: ",i.receivedMessageCounter,""),e.xp6(3),e.hij("Sent messages: ",i.sentMessageCounter,""),e.xp6(2),e.Q6J("ngModel",i.isConnected),e.xp6(12),e.hij("Current role: ",i.raftMetaData.role,""),e.xp6(3),e.hij("Current term: ",i.raftMetaData.term,""),e.xp6(3),e.hij("Last log index: ",i.raftMetaData.lastLogIndex,""),e.xp6(3),e.hij("Required nodes: ",i.nodes.size+1,"/3"),e.xp6(2),e.Q6J("ngIf",i.nodes.size>1&&!i.isActive&&i.isConnected),e.xp6(1),e.Q6J("ngIf",i.isActive||i.nodes.size<=1),e.xp6(4),e.AsE("",i.currentCell.colIndex,"|",i.currentCell.rowIndex,""),e.xp6(3),e.Q6J("ngModel",i.currentCell.input),e.xp6(6),e.Q6J("ngForOf",i.table.columns),e.xp6(4),e.Q6J("ngForOf",i.table.rows))},dependencies:[f.sg,f.O5,m._Y,m.JJ,m.JL,m.On,m.F,a.YG,a.Sm,a.PM,a.FN,a.Zi,a.Dq,a.wI,a.W2,a.jY,a.Gu,a.gu,a.pK,a.Ie,a.Q$,a.q_,a.Nd,a.wd,a.ho,a.sr,a.w,a.j9],styles:["table-header[_ngcontent-%COMP%]{color:gray;text-align:center}.small-cell[_ngcontent-%COMP%]{width:120px}.cell[_ngcontent-%COMP%]{width:150px}.selected[_ngcontent-%COMP%]{border:solid 5px black;height:50px;min-width:150px}.spreadsheet[_ngcontent-%COMP%]{overflow-x:auto}.spreadsheet[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed;width:100%}.spreadsheet[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .spreadsheet[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:solid 1px lightgray}"]}),s})()}];let J=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[_.Bz.forChild(j),_.Bz]}),s})(),q=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[f.ez,m.u5,a.Pc,J]}),s})()}}]);