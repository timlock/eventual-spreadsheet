<ion-content [fullscreen]="true">
  <ion-header>
    <ion-toolbar color="tertiary">
      <ion-title size="large">inconsistent-spreadsheet</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-grid>
    <ion-row>
      <ion-col size="auto">
        <ion-item lines="none">
          <ion-toggle [(ngModel)]="connectionEnabled">
            <ion-title>Global coordination</ion-title>
          </ion-toggle>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-item lines="none">
          <ion-title>Remote nodes: {{clusterSize}}</ion-title>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="auto">
        <ion-item lines="none">
          <ion-label>
            <ion-title>{{currentCell.colIndex}}|{{currentCell.rowIndex}}</ion-title>
          </ion-label>
        </ion-item>
      </ion-col>
      <ion-col>
        <form (submit)="insertCell(currentCell)">
          <ion-input name="input" fill="outline" [(ngModel)]="currentCell.input"></ion-input>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-button color="success" (click)="insertRow(currentCell.row)">
    Insert row
  </ion-button>

  <div class="spreadsheet">
    <table>
      <thead>
      <tr>
        <th class="table-header small-cell"></th>
        <th class="table-header cell" *ngFor="let col of columns;let i = index">
          <ion-toolbar>
            <ion-buttons slot="start">
              <ion-button fill="clear" size="small" color="success" (click)="insertColumn(col)">
                <ion-icon name="add"></ion-icon>
              </ion-button>
            </ion-buttons>
            {{i + 1}}
            <ion-buttons slot="end">
              <ion-button fill="clear" size="small" color="danger" (click)="deleteColumn(col)">
                <ion-icon name="close-circle-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-toolbar>
        </th>
        <ion-button color="primary" (click)=addColumn()>
          <ion-icon name="add"></ion-icon>
        </ion-button>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let row of rows;let r = index">
        <td class="table-header small-cell ">
          <ion-toolbar>
            <ion-buttons slot="start">
              <ion-button fill="clear" size="small" color="success" (click)="insertRow(row)">
                <ion-icon name="add"></ion-icon>
              </ion-button>
            </ion-buttons>
            {{r + 1}}
            <ion-buttons slot="end">
              <ion-button fill="clear" size="small" color="danger" (click)="deleteRow(row)">
                <ion-icon name="close-circle-outline"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-toolbar>
        </td>
        <td class="ion-text-right cell" (click)=selectCell(column,row)
            *ngFor="let column of columns; let c = index">
          <div *ngIf="currentCell.row === row && currentCell.column === column; else cellValue">
            <div class="selected">
              {{currentCell.input}}
            </div>
          </div>
          <ng-template #cellValue>
            {{ getCell(column, row)?.content }}
          </ng-template>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <ion-button color="primary" (click)=addRow()>
    <ion-icon name="add"></ion-icon>
  </ion-button>


  <!--  <ion-list>-->
  <!--    <ion-item>-->
  <!--      <ion-select interface="popover" (ionChange)="handleOperation($event)">-->
  <!--        <ion-select-option value="apples">Apples</ion-select-option>-->
  <!--        <ion-select-option value="oranges">Oranges</ion-select-option>-->
  <!--        <ion-select-option value="bananas">Bananas</ion-select-option>-->
  <!--      </ion-select>-->
  <!--    </ion-item>-->
  <!--  </ion-list>-->

  <ion-modal [isOpen]="isEditingColumn">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Column Action</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="submitColumnEdit()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-button expand="block" color="success" (click)="submitColumnEdit(Action.INSERT_COLUMN)">
          Insert column
        </ion-button>
        <ion-button expand="block" color="danger" (click)="submitColumnEdit(Action.INSERT_COLUMN)">
          Delete column
        </ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>

  <ion-modal [isOpen]="isEditingRow">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Row Action</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="submitRowEdit()">Close</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content>
        <ion-button expand="block" color="success" (click)="submitRowEdit(Action.INSERT_ROW)">
          Insert Row
        </ion-button>
        <ion-button expand="block" color="danger" (click)="submitRowEdit(Action.DELETE_ROW)">
          Delete Row
        </ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>


  <!--  <ion-grid class="ion-spreadsheet">-->
  <!--    <ion-row>-->
  <!--      <ion-col size="1" class="table-header">-->
  <!--        <ion-label>0</ion-label>-->
  <!--      </ion-col>-->
  <!--      <ion-col size="1" class="table-header" *ngFor="let col of columns;let i = index">{{i + 1}}</ion-col>-->
  <!--    </ion-row>-->
  <!--    <ion-row *ngFor="let row of rows;let r = index">-->
  <!--      <ion-col size="1" class="table-header my-thin-col">-->
  <!--        {{r + 1}}-->
  <!--      </ion-col>-->

  <!--      <ion-col size="1" (click)=selectCell(column,row) *ngFor="let column of columns; let c = index">-->
  <!--        <div class="ion-text-right">-->

  <!--          <div *ngIf="currentCell.row === row && currentCell.column === column; else cellValue">-->
  <!--            {{currentCell.input}}-->
  <!--          </div>-->
  <!--          <ng-template #cellValue>-->
  <!--            {{ getCell(column, row)?.content }}-->
  <!--          </ng-template>-->
  <!--        </div>-->

  <!--      </ion-col>-->
  <!--    </ion-row>-->
  <!--  </ion-grid>-->
  <!--  <ion-grid>-->
  <!--    <ion-row>-->
  <!--      <ion-col>-->
  <!--        <ion-title>Cell: {{currentCell.column}}|{{currentCell.row}}</ion-title>-->
  <!--      </ion-col>-->
  <!--    </ion-row>-->
  <!--    <ion-row>-->
  <!--      <ion-col>-->
  <!--        <ion-input fill="outline" label="Input:" [(ngModel)]="currentCell.input"></ion-input>-->
  <!--      </ion-col>-->
  <!--      <ion-col>-->
  <!--        <ion-button color="success" (click)="insertCell(currentCell)">-->
  <!--          <ion-icon name="checkmark-circle-outline"></ion-icon>-->
  <!--        </ion-button>-->
  <!--        <ion-button color="danger" (click)="deleteCell(currentCell)">-->
  <!--          <ion-icon name="close-circle-outline"></ion-icon>-->
  <!--        </ion-button>-->
  <!--      </ion-col>-->
  <!--    </ion-row>-->
  <!--    <ion-row>-->
  <!--      <ion-button color="success" (click)="insertRow(currentCell.row)">-->
  <!--        Insert row-->
  <!--      </ion-button>-->
  <!--      <ion-button color="danger" (click)="deleteRow(currentCell.row)">-->
  <!--        Delete row-->
  <!--      </ion-button>-->
  <!--      <ion-button color="success" (click)="insertColumn(currentCell.column)">-->
  <!--        Insert column-->
  <!--      </ion-button>-->
  <!--      <ion-button color="danger" (click)="deleteColumn(currentCell.column)">-->
  <!--        Delete column-->
  <!--      </ion-button>-->
  <!--    </ion-row>-->
  <!--    <ion-row>-->
  <!--      <ion-col>-->
  <!--        <ion-row>-->
  <!--          <ion-col class="cell table-header"></ion-col>-->
  <!--          <ion-col class="cell table-header" *ngFor="let col of columns;let i = index">{{i + 1}} ({{col}})-->
  <!--          </ion-col>-->
  <!--        </ion-row>-->
  <!--        <ion-row *ngFor="let row of rows;let r = index">-->
  <!--          <ion-col class="cell table-header">{{r + 1}} ({{row}})</ion-col>-->
  <!--          <ion-col (click)=selectCell(column,row) class="cell" *ngFor="let column of columns; let c = index">-->
  <!--            {{ getCell(column, row)?.content }}-->
  <!--          </ion-col>-->
  <!--        </ion-row>-->
  <!--      </ion-col>-->
  <!--      <ion-col>-->
  <!--        <ion-button color="primary" (click)=addColumn()>-->
  <!--          <ion-icon name="add"></ion-icon>-->
  <!--        </ion-button>-->
  <!--      </ion-col>-->
  <!--    </ion-row>-->
  <!--    <ion-row>-->
  <!--      <ion-button color="primary" (click)=addRow()>-->
  <!--        <ion-icon name="add"></ion-icon>-->
  <!--      </ion-button>-->
  <!--    </ion-row>-->
  <!--  </ion-grid>-->
</ion-content>
